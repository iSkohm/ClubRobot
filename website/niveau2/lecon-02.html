<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LeÃ§on N2-02 â€” Servomoteurs PWM Â· iSkohm</title>
  <link rel="stylesheet" href="../style.css">
</head>
<body>

<div class="progress-bar"></div>

<nav>
    <a href="../index.html" class="nav-logo">
    <img src="../camel-logo.png" class="camel-logo" alt="Club Robot iSkohm" />
    <span class="logo-text">Club Robot <span style="color:var(--cyan)">iSkohm</span></span>
  </a>
  <ul class="nav-links">
    <li><a href="../index.html">Accueil</a></li>
    <li><a href="../niveau1.html">Niveau 1</a></li>
    <li><a href="../niveau2.html" class="active">Niveau 2</a></li>
    <li><a href="../competition.html">ğŸ† CompÃ©tition</a></li>
  </ul>
</nav>

<div class="lesson-layout">

  <div class="breadcrumb">
    <a href="../index.html">Accueil</a>
    <span class="sep">â€º</span>
    <a href="../niveau2.html">Niveau 2</a>
    <span class="sep">â€º</span>
    <span class="current">LeÃ§on 2 â€” Servomoteurs PWM</span>
  </div>

  <div class="lesson-header">
    <div class="lesson-emoji">âš™ï¸</div>
    <h1 class="lesson-title">
      Servomoteurs PWM
      <span class="badge badge-intermediaire">IntermÃ©diaire</span>
    </h1>
    <div class="niveau-badge">ğŸŸ¢ Niveau 2 Â· Raspberry Pi Pico Â· LeÃ§on 2/8</div>
  </div>

  <div class="lesson-section">
    <h2>ğŸ¯ Objectifs</h2>
    <ul>
      <li>Comprendre le PWM 16-bit du Raspberry Pi Pico</li>
      <li>DiffÃ©rencier servomoteur standard (angle) et servomoteur Ã  rotation continue</li>
      <li>ContrÃ´ler la vitesse et la direction d'un servo Ã  rotation continue</li>
      <li>Connecter deux servomoteurs au Pico pour un robot diffÃ©rentiel</li>
    </ul>
  </div>

  <div class="lesson-section">
    <h2>ğŸ› ï¸ MatÃ©riel nÃ©cessaire</h2>
    <div class="material-grid">
      <span class="material-tag">ğŸ« Raspberry Pi Pico</span>
      <span class="material-tag">âš™ï¸ 2Ã— Servo rotation continue</span>
      <span class="material-tag">ğŸ”Œ CÃ¢ble USB</span>
      <span class="material-tag">ğŸ”‹ Alimentation 5V (powerbank)</span>
      <span class="material-tag">ğŸ”— Fils dupont</span>
    </div>
    <div class="info-box warning" style="margin-top:1rem">
      <span class="icon">âš¡</span>
      <div>Les servomoteurs consomment beaucoup de courant ! N'alimente <strong>JAMAIS</strong> deux servos directement depuis le port USB du Pico. Utilise une alimentation externe 5V (batterie sÃ©parÃ©e) avec GND commun.</div>
    </div>
  </div>

  <div class="lesson-section">
    <h2>ğŸ“– Cours</h2>

    <h3>Servo standard vs Servo Ã  rotation continue</h3>
    <p>Notre robot utilise des <strong>servomoteurs Ã  rotation continue</strong> â€” diffÃ©rents des servos standard :</p>
    <ul>
      <li><strong>Servo standard</strong> â†’ tourne jusqu'Ã  un angle prÃ©cis (0Â° Ã  180Â°). UtilisÃ© pour la pince en Niveau 1.</li>
      <li><strong>Servo Ã  rotation continue</strong> â†’ tourne en continu dans un sens ou dans l'autre, Ã  une vitesse variable. UtilisÃ© pour les <em>roues</em> du robot !</li>
    </ul>

    <h3>Le PWM 16-bit du Pico</h3>
    <p>Le Pico utilise un PWM 16-bit â€” plus prÃ©cis que la micro:bit. Les valeurs vont de 0 Ã  65535 :</p>

    <div class="code-block">
      <div class="code-block-header">
        <div class="code-block-lang"><div class="lang-dot"></div>Constantes PWM</div>
        <button class="copy-btn">Copier</button>
      </div>
      <div class="code-content"><code class="python"># Valeurs PWM pour servo Ã  rotation continue (16-bit, 50Hz)
STOP      = 4915   # ~1.5 ms â†’ servo arrÃªtÃ©
CW_MAX    = 3276   # ~1.0 ms â†’ rotation max sens aiguille
CCW_MAX   = 6553   # ~2.0 ms â†’ rotation max sens inverse

# Formule : duty = (temps_ms / 20ms) * 65535
# 1.0ms â†’ 3276,  1.5ms â†’ 4915,  2.0ms â†’ 6553</code></div>
    </div>

    <h3>Configuration du PWM sur le Pico</h3>

    <div class="code-block">
      <div class="code-block-header">
        <div class="code-block-lang"><div class="lang-dot"></div>Configuration PWM</div>
        <button class="copy-btn">Copier</button>
      </div>
      <div class="code-content"><code class="python">from machine import Pin, PWM
import time

# CrÃ©er les objets PWM sur GP15 et GP16
servo_gauche = PWM(Pin(15))
servo_droit = PWM(Pin(16))

# RÃ©gler la frÃ©quence Ã  50Hz (20ms de pÃ©riode)
servo_gauche.freq(50)
servo_droit.freq(50)

# DÃ©finir les constantes de vitesse
STOP    = 4915
CW_MAX  = 3276
CCW_MAX = 6553

# Envoyer le signal d'arrÃªt
servo_gauche.duty_u16(STOP)
servo_droit.duty_u16(STOP)</code></div>
    </div>

    <h3>Tester les directions</h3>

    <div class="code-block">
      <div class="code-block-header">
        <div class="code-block-lang"><div class="lang-dot"></div>Test directions</div>
        <button class="copy-btn">Copier</button>
      </div>
      <div class="code-content"><code class="python">from machine import Pin, PWM
import time

servo_gauche = PWM(Pin(15))
servo_droit = PWM(Pin(16))
servo_gauche.freq(50)
servo_droit.freq(50)

STOP    = 4915
CW_MAX  = 3276
CCW_MAX = 6553

# Test : tourne dans un sens pendant 2 secondes
servo_gauche.duty_u16(CW_MAX)
time.sleep(2)

# ArrÃªte
servo_gauche.duty_u16(STOP)
time.sleep(1)

# Tourne dans l'autre sens
servo_gauche.duty_u16(CCW_MAX)
time.sleep(2)

# ArrÃªte
servo_gauche.duty_u16(STOP)</code></div>
    </div>

    <div class="info-box tip">
      <span class="icon">ğŸ’¡</span>
      <div>Sur un servo Ã  rotation continue, <strong>STOP (1.5ms)</strong> = arrÃªt. Les valeurs entre STOP et CW_MAX donnent diffÃ©rentes vitesses ! Essaie 4000 ou 4500 pour une rotation lente.</div>
    </div>

    <h3>Calibration du point d'arrÃªt</h3>
    <p>Chaque servo est lÃ©gÃ¨rement diffÃ©rent. Si ton servo tourne encore avec la valeur STOP = 4915, ajuste lÃ©gÃ¨rement :</p>

    <div class="code-block">
      <div class="code-block-header">
        <div class="code-block-lang"><div class="lang-dot"></div>Calibration</div>
        <button class="copy-btn">Copier</button>
      </div>
      <div class="code-content"><code class="python">from machine import Pin, PWM
import time

servo = PWM(Pin(15))
servo.freq(50)

# Trouve le point exact oÃ¹ le servo s'arrÃªte
# Commence par 4915 et ajuste par Â±50 jusqu'Ã  arrÃªt complet
STOP = 4915  # modifie ce nombre si le servo ne s'arrÃªte pas

servo.duty_u16(STOP)
print("Le servo devrait Ãªtre arrÃªtÃ©. Ajuste STOP si besoin.")</code></div>
    </div>
  </div>

  <div class="lesson-section">
    <h2>âœï¸ Exercices</h2>

    <div class="exercice-card">
      <div class="ex-num">Exercice 1</div>
      <h3>Calibration</h3>
      <p>Trouve la valeur exacte de STOP pour tes deux servos. Note-les ! Ils peuvent Ãªtre lÃ©gÃ¨rement diffÃ©rents (ex: servo gauche = 4900, servo droit = 4930).</p>
    </div>

    <div class="exercice-card">
      <div class="ex-num">Exercice 2</div>
      <h3>Vitesses progressives</h3>
      <p>Programme un servo pour qu'il dÃ©marre doucement, accÃ©lÃ¨re progressivement jusqu'Ã  la vitesse max, puis dÃ©cÃ©lÃ¨re et s'arrÃªte. Utilise une boucle for avec des valeurs PWM intermÃ©diaires.</p>
    </div>

    <div class="exercice-card">
      <div class="ex-num">Exercice 3</div>
      <h3>Deux servos en parallÃ¨le</h3>
      <p>Branche les deux servos. Envoie CW_MAX sur les deux en mÃªme temps. Observe : si les servos sont face Ã  face (comme dans le robot), ils doivent tourner dans des sens opposÃ©s pour aller "dans la mÃªme direction". Identifie quelles valeurs font "avancer" le robot.</p>
    </div>
  </div>

  <div class="lesson-section">
    <div class="retenir-box">
      <h2>ğŸ§  Ã€ retenir</h2>
      <ul class="retenir-list">
        <li><strong>PWM(Pin(n))</strong> â€” crÃ©e un objet PWM sur le pin n</li>
        <li><strong>servo.freq(50)</strong> â€” frÃ©quence 50Hz (obligatoire pour les servos)</li>
        <li><strong>servo.duty_u16(valeur)</strong> â€” envoie le signal (0 Ã  65535)</li>
        <li>STOP = 4915 (~1.5ms) â€” servo Ã  rotation continue arrÃªtÃ©</li>
        <li>CW_MAX = 3276 (~1.0ms) â€” rotation maximale sens horaire</li>
        <li>CCW_MAX = 6553 (~2.0ms) â€” rotation maximale sens anti-horaire</li>
        <li>Alimente toujours les servos avec une <strong>source externe</strong> !</li>
      </ul>
    </div>
  </div>

  <div class="lesson-nav">
    <a href="lecon-01.html">â† LeÃ§on 1 â€” Intro Pico</a>
    <a href="lecon-03.html">LeÃ§on 3 â€” Mouvement â†’</a>
  </div>

</div>

<footer>
  <p>    <div class="footer-brand">
    <img src="../camel-logo.png" class="camel-logo" alt="Club Robot iSkohm" />
    <span class="logo-text">Club Robot <span style="color:var(--cyan)">iSkohm</span></span>
  </div> Â· <a href="https://robot.iskohm.com">robot.iskohm.com</a></p>
</footer>

<script src="../app.js"></script>
</body>
</html>
