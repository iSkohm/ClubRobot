<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Le√ßon N2-03 ‚Äî Mouvement de base ¬∑ iSkohm</title>
  <link rel="stylesheet" href="../style.css">
</head>
<body>

<div class="progress-bar"></div>

<nav>
    <a href="../index.html" class="nav-logo">
    <img src="../camel-logo.png" class="camel-logo" alt="Club Robot iSkohm" />
    <span class="logo-text">Club Robot <span style="color:var(--cyan)">iSkohm</span></span>
  </a>
  <ul class="nav-links">
    <li><a href="../index.html">Accueil</a></li>
    <li><a href="../niveau1.html">Niveau 1</a></li>
    <li><a href="../niveau2.html" class="active">Niveau 2</a></li>
    <li><a href="../competition.html">üèÜ Comp√©tition</a></li>
  </ul>
</nav>

<div class="lesson-layout">

  <div class="breadcrumb">
    <a href="../index.html">Accueil</a>
    <span class="sep">‚Ä∫</span>
    <a href="../niveau2.html">Niveau 2</a>
    <span class="sep">‚Ä∫</span>
    <span class="current">Le√ßon 3 ‚Äî Mouvement de base</span>
  </div>

  <div class="lesson-header">
    <div class="lesson-emoji">ü§ñ</div>
    <h1 class="lesson-title">
      Mouvement de base
      <span class="badge badge-intermediaire">Interm√©diaire</span>
    </h1>
    <div class="niveau-badge">üü¢ Niveau 2 ¬∑ Raspberry Pi Pico ¬∑ Le√ßon 3/8</div>
  </div>

  <div class="lesson-section">
    <h2>üéØ Objectifs</h2>
    <ul>
      <li>Comprendre le fonctionnement d'un robot diff√©rentiel (roues ind√©pendantes)</li>
      <li>Programmer les fonctions : avance, recule, tourne gauche, tourne droite, stop</li>
      <li>Cr√©er une biblioth√®que de mouvements r√©utilisable</li>
      <li>Tester et calibrer les mouvements du robot</li>
    </ul>
  </div>

  <div class="lesson-section">
    <h2>üõ†Ô∏è Mat√©riel n√©cessaire</h2>
    <div class="material-grid">
      <span class="material-tag">ü´ê Raspberry Pi Pico</span>
      <span class="material-tag">ü§ñ Robot Otto assembl√©</span>
      <span class="material-tag">üîã Alimentation 5V</span>
      <span class="material-tag">üíª Thonny IDE</span>
    </div>
  </div>

  <div class="lesson-section">
    <h2>üìñ Cours</h2>

    <h3>Le robot diff√©rentiel</h3>
    <p>Notre robot Otto est un <strong>robot diff√©rentiel</strong> : il a deux roues ind√©pendantes. En contr√¥lant la vitesse et la direction de chaque roue s√©par√©ment, on peut faire tous les mouvements :</p>

    <div style="background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:1rem;margin:1rem 0;font-size:0.875rem">
      <table style="width:100%;border-collapse:collapse;color:var(--muted)">
        <tr style="border-bottom:1px solid var(--border)">
          <th style="text-align:left;padding:.5rem;color:var(--white)">Mouvement</th>
          <th style="text-align:center;padding:.5rem;color:var(--white)">Roue Gauche</th>
          <th style="text-align:center;padding:.5rem;color:var(--white)">Roue Droite</th>
        </tr>
        <tr style="border-bottom:1px solid var(--border)">
          <td style="padding:.5rem">‚¨ÜÔ∏è Avancer</td>
          <td style="text-align:center;padding:.5rem;color:var(--green)">‚Ü∫ CCW_MAX</td>
          <td style="text-align:center;padding:.5rem;color:var(--blue)">‚Üª CW_MAX</td>
        </tr>
        <tr style="border-bottom:1px solid var(--border)">
          <td style="padding:.5rem">‚¨áÔ∏è Reculer</td>
          <td style="text-align:center;padding:.5rem;color:var(--blue)">‚Üª CW_MAX</td>
          <td style="text-align:center;padding:.5rem;color:var(--green)">‚Ü∫ CCW_MAX</td>
        </tr>
        <tr style="border-bottom:1px solid var(--border)">
          <td style="padding:.5rem">‚Ü©Ô∏è Tourner gauche</td>
          <td style="text-align:center;padding:.5rem;color:var(--blue)">‚Üª CW_MAX</td>
          <td style="text-align:center;padding:.5rem;color:var(--blue)">‚Üª CW_MAX</td>
        </tr>
        <tr>
          <td style="padding:.5rem">‚Ü™Ô∏è Tourner droite</td>
          <td style="text-align:center;padding:.5rem;color:var(--green)">‚Ü∫ CCW_MAX</td>
          <td style="text-align:center;padding:.5rem;color:var(--green)">‚Ü∫ CCW_MAX</td>
        </tr>
      </table>
    </div>

    <h3>Le code complet ‚Äî 1.Servo.py</h3>
    <p>Voici le fichier de mouvements de base de notre robot. Copie-le sur le Pico sous le nom <code>1.Servo.py</code> :</p>

    <div class="code-block">
      <div class="code-block-header">
        <div class="code-block-lang"><div class="lang-dot"></div>pico/1.Servo.py</div>
        <button class="copy-btn">Copier</button>
      </div>
      <div class="code-content"><code class="python">from machine import Pin, PWM, time_pulse_us
import time


# PWM setup
servo_gauche = PWM(Pin(15))
servo_droit = PWM(Pin(16))

servo_gauche.freq(50)
servo_droit.freq(50)

# === Pulse Width Constants (16-bit duty) ===
STOP      = 4915   # ~1.5 ms
CW_MAX    = 3276   # ~1.0 ms  Max Sens Aiguille
CCW_MAX   = 6553   # ~2.0 ms  Max Oppose



def avance(temps_secondes = 2):
    servo_gauche.duty_u16(CCW_MAX)
    servo_droit.duty_u16(CW_MAX)
    time.sleep(temps_secondes)
    stop()
    

def recule(temps_secondes = 2):
    servo_gauche.duty_u16(CW_MAX)
    servo_droit.duty_u16(CCW_MAX)
    time.sleep(temps_secondes)
    stop()


def tourne_gauche(temps_secondes = 1):
    servo_gauche.duty_u16(CW_MAX)
    servo_droit.duty_u16(CW_MAX)
    time.sleep(temps_secondes)
    stop()
    

def tourne_droite(temps_secondes = 1):
    servo_gauche.duty_u16(CCW_MAX)
    servo_droit.duty_u16(CCW_MAX)
    time.sleep(temps_secondes)
    stop()


def stop():
    servo_gauche.duty_u16(STOP)
    servo_droit.duty_u16(STOP)</code></div>
    </div>

    <h3>Analyse du code</h3>
    <p>Points importants :</p>
    <ul>
      <li><strong>Param√®tre par d√©faut</strong> : <code>def avance(temps_secondes = 2)</code> ‚Äî si on appelle <code>avance()</code> sans argument, elle avance 2 secondes. Mais on peut √©crire <code>avance(0.5)</code> pour avancer seulement 0.5 secondes !</li>
      <li><strong>stop() √† la fin</strong> : chaque fonction de mouvement appelle <code>stop()</code> √† la fin ‚Äî le robot s'arr√™te automatiquement apr√®s le mouvement.</li>
      <li><strong>Sens oppos√©s pour avancer</strong> : le servo gauche tourne en CCW (anti-horaire) et le droit en CW (horaire). C'est normal car les moteurs sont mont√©s face √† face dans le robot !</li>
    </ul>

    <h3>Utiliser les fonctions de mouvement</h3>

    <div class="code-block">
      <div class="code-block-header">
        <div class="code-block-lang"><div class="lang-dot"></div>main.py ‚Äî exemple de parcours</div>
        <button class="copy-btn">Copier</button>
      </div>
      <div class="code-content"><code class="python"># Importe toutes les fonctions de 1.Servo.py
from Servo import *  # ou copie le code directement
import time

# Parcours carr√©
avance(1)         # avance 1 seconde
time.sleep(0.2)   # petite pause

tourne_droite(0.5)  # tourne 90¬∞ (calibre la dur√©e !)
time.sleep(0.2)

avance(1)
time.sleep(0.2)

tourne_droite(0.5)
time.sleep(0.2)

avance(1)
time.sleep(0.2)

tourne_droite(0.5)
time.sleep(0.2)

avance(1)         # quatri√®me c√¥t√© du carr√©
stop()</code></div>
    </div>

    <div class="info-box tip">
      <span class="icon">‚è±Ô∏è</span>
      <div>Pour faire un virage √† 90¬∞, tu dois calibrer la dur√©e exp√©rimentalement. Commence par <code>tourne_droite(0.5)</code> et ajuste jusqu'√† obtenir exactement 90¬∞. La dur√©e d√©pend de la vitesse des servos et du poids du robot !</div>
    </div>

    <h3>Ajouter des vitesses variables</h3>

    <div class="code-block">
      <div class="code-block-header">
        <div class="code-block-lang"><div class="lang-dot"></div>Vitesses variables</div>
        <button class="copy-btn">Copier</button>
      </div>
      <div class="code-content"><code class="python">from machine import Pin, PWM
import time

servo_gauche = PWM(Pin(15))
servo_droit = PWM(Pin(16))
servo_gauche.freq(50)
servo_droit.freq(50)

STOP    = 4915
CW_MAX  = 3276
CCW_MAX = 6553

def avance_vitesse(vitesse, temps):
    # vitesse entre 0.0 (lent) et 1.0 (max)
    # Calcule le duty_u16 proportionnellement
    g_duty = int(STOP + (CCW_MAX - STOP) * vitesse)
    d_duty = int(STOP - (STOP - CW_MAX) * vitesse)
    servo_gauche.duty_u16(g_duty)
    servo_droit.duty_u16(d_duty)
    time.sleep(temps)
    stop()

def stop():
    servo_gauche.duty_u16(STOP)
    servo_droit.duty_u16(STOP)

# Exemple : avance √† 50% de vitesse pendant 2 secondes
avance_vitesse(0.5, 2)</code></div>
    </div>
  </div>

  <div class="lesson-section">
    <h2>‚úèÔ∏è Exercices</h2>

    <div class="exercice-card">
      <div class="ex-num">Exercice 1</div>
      <h3>Calibration des virages</h3>
      <p>Trace un carr√© sur le sol (par exemple avec du masking tape). Calibre les dur√©es de <code>tourne_droite()</code> et <code>tourne_gauche()</code> pour que le robot fasse exactement 90¬∞. Note les valeurs dans ton cahier !</p>
    </div>

    <div class="exercice-card">
      <div class="ex-num">Exercice 2</div>
      <h3>Parcours en forme de 8</h3>
      <p>Programme le robot pour qu'il trace un 8 : avance, tourne droite √† 180¬∞, avance, tourne gauche √† 180¬∞. R√©p√®te 3 fois pour voir si c'est pr√©cis.</p>
    </div>

    <div class="exercice-card">
      <div class="ex-num">Exercice 3 ‚Äî D√©fi</div>
      <h3>Ton initiale</h3>
      <p>Programme le robot pour qu'il trace la premi√®re lettre de ton pr√©nom sur le sol. Tu dois calculer les angles et les distances. Prends une photo du r√©sultat !</p>
    </div>
  </div>

  <div class="lesson-section">
    <div class="retenir-box">
      <h2>üß† √Ä retenir</h2>
      <ul class="retenir-list">
        <li>Robot diff√©rentiel : deux roues ind√©pendantes contr√¥lent tous les mouvements</li>
        <li><strong>Avancer</strong> : roues dans des sens oppos√©s (car mont√©es face √† face)</li>
        <li><strong>Tourner</strong> : roues dans le m√™me sens</li>
        <li>Param√®tre par d√©faut : <code>def avance(temps=2)</code></li>
        <li>Toujours appeler <code>stop()</code> apr√®s un mouvement</li>
        <li>Calibre les dur√©es de virage exp√©rimentalement sur ta surface r√©elle !</li>
      </ul>
    </div>
  </div>

  <div class="lesson-nav">
    <a href="lecon-02.html">‚Üê Le√ßon 2 ‚Äî Servomoteurs</a>
    <a href="lecon-04.html">Le√ßon 4 ‚Äî Parcours ‚Üí</a>
  </div>

</div>

<footer>
  <p>    <div class="footer-brand">
    <img src="../camel-logo.png" class="camel-logo" alt="Club Robot iSkohm" />
    <span class="logo-text">Club Robot <span style="color:var(--cyan)">iSkohm</span></span>
  </div> ¬∑ <a href="https://robot.iskohm.com">robot.iskohm.com</a></p>
</footer>

<script src="../app.js"></script>
</body>
</html>
